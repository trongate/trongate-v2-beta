<h1>How Themes Work</h1>

<p>You just saw themes in action. Now let's pull the curtain and watch the magic happen—step by step.</p>

<h2>The One Decision That Changes Everything</h2>

<p>When you call:</p>

[code=php]
$this-&gt;template('admin', $data);
[/code]

<p>Trongate does this first:</p>

<p><em>Does a theme called 'admin' exist in the THEMES constant?</em></p>

<p>If yes → theme mode activated. If no → fall back to regular template in <code>templates/views/</code>.</p>

<p>That single check is the entire difference.</p>

<h2>Inside config/themes.php</h2>

[code=php]
&lt;?php
$themes = [
    'admin' =&gt; [
        'dir'      =&gt; 'default_admin/blue',
        'template' =&gt; 'admin.php',
    ],
    'admin_dark' =&gt; [
        'dir'      =&gt; 'default_admin/purple',
        'template' =&gt; 'admin.php',
    ],
];
define('THEMES', $themes);
[/code]

<p>The key is the array key (<code>'admin'</code>). That's exactly what you pass to <code>$this-&gt;template()</code>.</p>

<h2>Path Resolution – Zero Guesswork</h2>

<p>Trongate builds the full path like this:</p>

[code=php]
$theme_path = PUBLIC_PATH . 'themes/' . $theme_config['dir'] . '/' . $theme_config['template'];
[/code]

<p>So <code>'admin'</code> becomes:</p>

<p><code>public/themes/default_admin/blue/admin.php</code></p>

<p>That file gets loaded instead of <code>templates/views/admin.php</code>.</p>

<h2>THEME_DIR – The Constant You'll Love</h2>

<p>Right before loading the theme template, Trongate defines:</p>

[code=php]
define('THEME_DIR', BASE_URL . 'themes/' . $theme_config['dir'] . '/');
[/code]

<p>Result:</p>

<ul>
    <li><code>THEME_DIR</code> always points to the current variation folder</li>
    <li>Your CSS/JS/image paths just work</li>
    <li>Switch from <code>blue</code> to <code>purple</code> → <code>THEME_DIR</code> updates automatically</li>
</ul>

<h2>The Shared Assets Trick</h2>

<p>Look at the default admin theme structure:</p>

[code]
public/themes/
    default_admin/
        css/
            shared.css       ← used by ALL color variations
        blue/
            css/
                theme.css    ← blue-specific styles
            admin.php
        purple/
            css/
                theme.css    ← purple-specific styles
            admin.php
[/code]

<p>How to use shared assets inside a variation:</p>

[code=php]
&lt;?php
// Get parent directory for shared assets
$root_theme_dir = dirname(rtrim(THEME_DIR, '/')) . '/';
?&gt;

&lt;!-- Shared CSS for all variations --&gt;
&lt;link rel="stylesheet" href="&lt;?= $root_theme_dir ?&gt;css/shared.css"&gt;

&lt;!-- Variation-specific CSS --&gt;
&lt;link rel="stylesheet" href="&lt;?= THEME_DIR ?&gt;css/theme.css"&gt;
[/code]

<p>One shared stylesheet. One variation stylesheet. Change colors without duplicating layout code. Clean and DRY.</p>

<h2>Full Loading Sequence</h2>

<p>What really happens when you call <code>$this-&gt;template('admin', $data)</code>:</p>

<ol>
    <li>Trongate checks <code>THEMES['admin']</code> → exists</li>
    <li>Builds path: <code>public/themes/default_admin/blue/admin.php</code></li>
    <li>Defines <code>THEME_DIR</code> as <code>https://yoursite.com/themes/default_admin/blue/</code></li>
    <li>Processes additional includes (top &amp; bottom)</li>
    <li>Loads the theme template file</li>
    <li>Inside the template, <code>Template::display($data)</code> injects your view content</li>
    <li>Page renders with perfect asset paths</li>
</ol>

<p>That's it. No service providers. No autoloading wizardry. Just a constant, a couple of string concatenations, and Native PHP doing what it does best.</p>

<p>Now you know exactly how themes work. Next: building your own from scratch.</p>