<h1>Additional Includes</h1>

<p>Every page has its own toys. Dashboard wants charts. Profile page wants an image cropper. Blog post wants syntax highlighting.</p>

<p>With <b>additional includes</b>, you exactly what each page needs—nothing more, nothing less.</p>

<h2>From Any Controller</h2>

<p>Pass two arrays into <code>$data</code>:</p>

[code=php]
&lt;?php
class Dashboard extends Trongate {

    public function index(): void {
        
        $data['additional_includes_top'] = [
            'css/dashboard.css',
            'css/charts.css'
        ];
        
        $data['additional_includes_btm'] = [
            'js/charts.js',
            'js/dashboard.js'
        ];

        $data['view_file'] = 'dashboard_home';
        $this-&gt;template('admin', $data);
    }
}
[/code]

<p><strong>Additional Includes Top</strong> = for inside <code>&lt;head&gt;</code> (CSS + critical JS).</p>

<p><strong>Additional Includes Bottom</strong> = for before <code>&lt;/body&gt;</code> (page scripts).</p>

<h2>Template Side – Two Lines of Processing</h2>

<p>In <code>Templates.php</code>, every template method processes these arrays using <code>build_additional_includes()</code>:</p>

[code=php]
public function admin(array $data): void {
    $data['additional_includes_top'] = $this-&gt;build_additional_includes($data['additional_includes_top'] ?? []);
    $data['additional_includes_btm'] = $this-&gt;build_additional_includes($data['additional_includes_btm'] ?? []);
    load('admin', $data);
}
[/code]

<p>The framework turns file paths into proper HTML tags, indented and ready.</p>

<h2>Inside Your Template File</h2>

[code=php]
&lt;!DOCTYPE html&gt;
&lt;html lang="en"&gt;
&lt;head&gt;
    &lt;base href="&lt;?= BASE_URL ?&gt;"&gt;
    &lt;meta charset="UTF-8"&gt;
    &lt;link rel="stylesheet" href="css/trongate.css"&gt;
    &lt;?= $additional_includes_top ?? '' ?&gt;
    &lt;title&gt;&lt;?= $page_title ?? 'My App' ?&gt;&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;?= Template::display($data) ?&gt;
    &lt;?= $additional_includes_btm ?? '' ?&gt;
&lt;/body&gt;
&lt;/html&gt;
[/code]

<p>The <code>?? ''</code> prevents errors if no additional includes are passed.</p>

<h2>What Gets Rendered</h2>

<ul>
    <li><code>css/something.css</code> → <code>&lt;link rel="stylesheet" href="css/something.css"&gt;</code></li>
    <li><code>js/something.js</code> → <code>&lt;script src="js/something.js"&gt;&lt;/script&gt;</code></li>
</ul>

<p>Clean HTML. Zero effort.</p>

<h2>Conditional Loading</h2>

<p>Load assets only when needed:</p>

[code=php]
if ($product-&gt;has_gallery) {
    $data['additional_includes_btm'][] = 'js/image_zoom.js';
    $data['additional_includes_top'][] = 'css/image_zoom.css';
}
[/code]

<h2>Using Full HTML Strings</h2>

<p>Need custom attributes or CDN links? Pass complete HTML strings:</p>

[code=php]
public function manage(): void {
    $data['additional_includes_top'] = [
        '&lt;link rel="stylesheet" href="https://cdn.example.com/fancy.css"&gt;',
        '&lt;script defer src="https://cdn.example.com/alpine.js"&gt;&lt;/script&gt;'
    ];
    
    $data['view_file'] = 'manage';
    $this-&gt;template('admin', $data);
}
[/code]

<p>The <code>build_additional_includes()</code> method still processes the array—it just passes HTML strings through unchanged.</p>